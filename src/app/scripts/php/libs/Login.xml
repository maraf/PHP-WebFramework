<?xml version="1.0" encoding="utf-8" ?>

<taglib>
  <name>Login lib</name>
  <classname>Login</classname>
  <classpath>php.libs</classpath>
  <count>1</count>
  <comment>
    Třída pro logování užívatelů, je defaultním objektem a maximálně jedna instance.
    Za logovaný uživatel smí být max 15min bez aktivity, poté je automaticky ohlášen.
  </comment>
  <tag>
    <tagname>init</tagname>
    <function>initLogin</function>
    <attribute>
      <attname>group</attname>
      <attreq>required</attreq>
    </attribute>
    <comment>
      Inicializuje login.
    </comment>
  </tag>
  <tag>
    <tagname>form</tagname>
    <function>showLoginForm</function>
    <attribute>
      <attname>group</attname>
      <attreq>required</attreq>
    </attribute>
    <attribute>
      <attname>pageId</attname>
      <attreq>required</attreq>
    </attribute>
    <attribute>
      <attname>autoLoginUserName</attname>
      <attreq>implied</attreq>
    </attribute>
    <attribute>
      <attname>autoLoginPassword</attname>
      <attreq>implied</attreq>
    </attribute>
    <comment>
      Zobrazí formulář pro přihlášení a po jeho odeslání se pokusí uživatele 
      přihlásit do skupiny specifikované atributem "group".
      V případě úspechu je přesměrován na stránku "pageId".
    </comment>
  </tag>
  <fulltag>
    <tagname>login</tagname>
    <function>loginLookless</function>
    <lookless>true</lookless>
    <attribute>
      <attname>group</attname>
      <attreq>required</attreq>
      <atttype>string</atttype>
      <attcomment>Název skupiny, pro kterou se má přihlášení provést.</attcomment>
    </attribute>
    <attribute>
      <attname>username</attname>
      <attreq>required</attreq>
      <atttype>string</atttype>
      <attcomment>Uživatelské jméno.</attcomment>
    </attribute>
    <attribute>
      <attname>password</attname>
      <attreq>required</attreq>
      <atttype>string</atttype>
      <attcomment>Heslo.</attcomment>
    </attribute>
    <comment>
      Provede přihlášení uživatele "username" do skupiny "group", pokud je "password" správné.
      Těla je vykonáno, pokud se přihlášení provedlo.
    </comment>
  </fulltag>
  <tag>
    <tagname>logout</tagname>
    <function>showLogoutForm</function>
    <attribute>
      <attname>group</attname>
      <attreq>required</attreq>
    </attribute>
    <attribute>
      <attname>pageId</attname>
      <attreq>required</attreq>
    </attribute>
    <comment>
      Zobrazí formulář pro ohlášení uživatele ze skupin 'group'. Dále také kontroluje zda přihlášení uživatele
      nevypršelo. Po odhlášení je uživatel přesměrován na stránku "pageId".
    </comment>
  </tag>
  <fulltag>
    <tagname>logout</tagname>
    <function>logout</function>
    <lookless>true</lookless>
    <attribute>
      <attname>group</attname>
      <attreq>required</attreq>
      <attcomment>Název skupiny, pro kterou se má odhlášení provést.</attcomment>
    </attribute>
    <comment>
      Provede odhlášení uživatele ze skupiny "group".
      Těla je vykonáno, pokud se odhlášení provedlo.
    </comment>
  </fulltag>
  <fulltag>
    <tagname>refresh</tagname>
    <function>refresh</function>
    <lookless>true</lookless>
    <attribute>
      <attname>group</attname>
      <attreq>required</attreq>
      <attcomment>Název skupiny, pro kterou se má obnovení provést.</attcomment>
    </attribute>
    <comment>
      Provede obnovu přihlašovacího tiketu.
      V případě, že již není platný, vykoná se tělo.
    </comment>
  </fulltag>
  <tag>
    <tagname>info</tagname>
    <function>loggedUserInfo</function>
    <attribute>
      <attname>field</attname>
      <attype>string</attype>
      <attreq>implied</attreq>
      <attcomment>Umožňuje vypsat jen jeden field z infomací o uživateli ("name", "surname", group", "username", "login" - username + domain)</attcomment>
    </attribute>
    <comment>
      Zobrazí informace o přihlášeném uživateli (jméno, login, skupinu).
    </comment>
  </tag>
  <tag>
    <tagname>redirectWhenLogged</tagname>
    <function>redirectWhenLogged</function>
    <attribute>
      <attname>pageId</attname>
      <attreq>required</attreq>
    </attribute>
    <comment>
      Přesměruje užívatele pokud je přihlášen na stránku "pageId".
    </comment>
  </tag>
  <tag>
    <tagname>redirectWhenNotLogged</tagname>
    <function>redirectWhenNotLogged</function>
    <attribute>
      <attname>pageId</attname>
      <attreq>required</attreq>
    </attribute>
    <comment>
      Přesměruje užívatele pokud není přihlášen na stránku "pageId".
    </comment>
  </tag>
  <fulltag>
    <tagname>authorized</tagname>
    <function>authorized</function>
    <attribute>
      <attname>all</attname>
      <attreq>implied</attreq>
      <atttype>string</atttype>
      <attcomment>Seznam (čárkou oddělený) skupin, ve kterých musí uživatel být, aby bylo zobrazeno tělo tagu.</attcomment>
    </attribute>
    <attribute>
      <attname>any</attname>
      <attreq>implied</attreq>
      <atttype>string</atttype>
      <attcomment>Seznam (čárkou oddělený) skupin, z nichž alespoň v jedné musí uživatel být, aby bylo zobrazeno tělo tagu.</attcomment>
    </attribute>
    <attribute>
      <attname>none</attname>
      <attreq>implied</attreq>
      <atttype>string</atttype>
      <attcomment>Seznam (čárkou oddělený) skupin, z nichž v žádné uživatel nesmí být, aby bylo zobrazeno tělo tagu.</attcomment>
    </attribute>
    <comment>
      Podmíněné zobrazení části stránky.
      Vždy musí být zadán jeden z atributů "all" nebo "any". Pokud není vyplněn ani jeden, je tělo vždy zobrazeno.
    </comment>
  </fulltag>
  <property>
  	<propname>loggedUserId</propname>
  	<getfunction>getUserId</getfunction>
    <comment>
      Vrací id aktuálního uživatele.
    </comment>
  </property>
  <property>
  	<propname>isLogged</propname>
  	<getfunction>isLogged</getfunction>
    <comment>
      Vrací "true" pokud je uživatel přihlášen.
    </comment>
  </property>
</taglib>